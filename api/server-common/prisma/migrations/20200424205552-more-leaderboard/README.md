# Migration `20200424205552-more-leaderboard`

This migration has been generated by Salvatore at 4/24/2020, 8:55:52 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."GlobalLeaderboardEntry" ADD COLUMN "updatedAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP;

ALTER TABLE "public"."ServerLeaderboardEntry" ADD COLUMN "updatedAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP;

CREATE UNIQUE INDEX "GlobalLeaderboardEntry.sessionId" ON "public"."GlobalLeaderboardEntry"("sessionId")

CREATE UNIQUE INDEX "ServerLeaderboardEntry.sessionId" ON "public"."ServerLeaderboardEntry"("sessionId")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200424203223-switched-up-leaderboard..20200424205552-more-leaderboard
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -18,12 +18,13 @@
 model ServerLeaderboardEntry {
   id                 Int              @default(autoincrement()) @id
   createdAt          DateTime         @default(now())
-  serverId           Int
+   updatedAt          DateTime         @default(now())
+ serverId           Int
   server             Server           @relation(fields: [serverId], references: [id])
   score              Int
-  sessionId            String
+  sessionId            String @unique()
   userId               Int
   user                 User   @relation(fields: [userId], references: [id])
   aliveTime            Int
   damageGiven          Int
@@ -35,10 +36,11 @@
 model GlobalLeaderboardEntry {
   id                 Int              @default(autoincrement()) @id
   createdAt          DateTime         @default(now())
+  updatedAt          DateTime         @default(now())
   score              Int
-  sessionId            String
+  sessionId            String  @unique()
   userId               Int
   user                 User   @relation(fields: [userId], references: [id])
   aliveTime            Int
   damageGiven          Int
```


